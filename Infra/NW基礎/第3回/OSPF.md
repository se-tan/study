# OSPF (Open Shortest Path First)
リンクステート型ルーティングプロトコルのこと。ポップ数制限がなく、拡張性もあり、収束も高速。

## リンクステート型ルーティングプロトコル
1. Helloパケットを送信し合い、隣接ルータとネイバー関係を確立し、**ネイバーテーブル**を作成  
    OSPFでは隣接ルータとHelloパケットを交換することでネイバー関係を確立する。  
    このHelloパケットはマルチキャスト(224.0.0.5)で送信する。

2. 全体のNW構成を知るために、そのNW上全てのルータから情報(**LSA**)を収集  
    ネイバー関係確立後、OSPFルータは自身の持つリンク情報(I/F情報)をネイバールータに  
    LSA(Link State Advertisement)として送信し合う。受信したLSAはトポロジテーブル(LSDB)に格納する。  
    受信したLSAを別のネイバールータに送信して、最終的にNW全体でLSAが通知される。

3. その収集したLSAを**トポロジテーブル**に格納する。そしてその情報から**トポロジマップ**を作成  
    LSDB(Link State Database)は同じエリア内の全てのルータで同じLSDBを保持する。  
    このLSDBに格納されたLSAを組み合わせてNW全体の地図であるトポロジマップを作成する。

4. そのトポロジマップから、SPFアルコリズムにより**SPFツリー**と呼ばれるNW構成図を作成  
    次にSPFアルゴリズム(ダイクストラ)を実行し階層ツリーであるSPFツリーを作成する。  
    SPFでは、各ルータは自身をルートとして頂点に位置付け、宛先NWへの**コスト**合計値を計算する。  
    コストはリンク(I/F)の帯域幅を基に算出される(10Mbps=10, 1Mbps=1)。

5. そのSPFツリーから最短経路を計算し、最短パスをルーティングテーブルに登録

リンクステート型ルーティングプロトコルでは、30分間隔でLSAごとに同期を行うので負荷が少ない。  
また、トポロジの変更時、**トリガーアップデート**で即時にLSAをNW内全てのルータにアドバタイズする。  
トポロジチェンジの時は、変更部分だけを差分アップデートするので帯域消費が少ない。

## エリア
「LSAを交換する範囲を示す論理グループ」のこと。各エリア内ではリンクステート情報を持つが、  
エリアの分割により異なるエリアには集約した情報だけを通知すればよく、LSAのフラッディングを限定的にできる。  
結果として、OSPFルータの負荷が軽くなる。

