# NAT (Network Address Translation)
IPアドレスを交換する技術。一般的にはプライベートIPアドレスをグローバルIPアドレスに変換する技術。  

## 特徴
内部NWから外部NWへ送信される時は、IPパケットのヘッダ内にある***送信元IPアドレス***を変換する。  
外部NEから内部NWへ送信される時は、宛先IPアドレスが変換されることになる。

## CiscoにおけるNAT用語
|           NAT            | Output display  |             Description                  |
|:------------------------:|:---------------:|:----------------------------------------:|
|   内部ローカルアドレス   |  Inside local   | 内部NWのホストに割り当てられるIPアドレス |
|  内部グローバルアドレス  |  Inside global  |外部NWから見た、内部NWのホストのIPアドレス|
|   外部ローカルアドレス   |  Outside local  |内部NWから見た、外部NWのホストのIPアドレス|
|  外部グローバルアドレス  |  Outside global | 外部NWのホストに割り当てられたIPアドレス |

## 仕組み
例：送信元アドレス変換を行う場合  
1. クライアントPCからインターネット上のサーバにパケットを送信
2. ルータでパケット受信後にNATテーブルを確認
3. NAT変換エントリに従って送信元IPアドレスを変換しパケットを送信

4. パケットを受信したサーバはクライアントPCにパケットを返信
5. ルータでパケット受信後に送信元IPアドレスを元にNATテーブルを確認
6. NAT変換エントリに従って宛先IPアドレスを変換してパケットを送信

## スタティックNATとダイナミックNAT
### スタティックNAT
NATは1対1のアドレス変換の技術だが、その変換方法には大きく2つある。
* スタティックNAT  
    管理者があらかじめNATルータに1対1の変換エントリを設定しておくNAT。

* ダイナミックNAT  
    NAT変換で使用するIPアドレスのプールを設定しておくことで、  
    外部への通信が発生したときにそのプール内のIPアドレスを1つ使用してNAT変換する。

***

# PAT (Port Address Translation)
1つのIPアドレスを複数のコンピュータで共有する技術のこと。***IPマスカレード***ともいう。  
IPアドレスのほかにTCP/UDPのポート番号も動的変換して、NATテーブルに変換エントリを登録することで識別している。  
IPが同じでも送信元ポート番号が異なるので、各通信を認識できる。