# 1 AWSにおけるコスト管理
|タスク|タスク概要|主なサービス|
|------|----------|------------|
|請求/支払い|複数のAWSアカウントをまとめて支払い管理|Consolidated Billing|
|詳細把握|コストとリソース使用量の詳細をレポート/分析|AWS Cost and Usage Report|
|可視化/傾向分析|コスト可視化やうh夏堀分析/将来予測|AWS Cost Explorer|
|過剰利用の監視|予算策定や予算超過のアラート管理|AWS Budgets|
|コスト最適化の検討|最適化余地があるリソースを分析/改善|AWS Trusted Advisor|

***
# 2 Consolidated Billing(一括請求)による支払い管理
複数のAWSアカウントに対する請求をひとつに統合し、まとめて支払いできる機能。  
AWS Organizationの一機能として提供。利点は以下の通り。
- 複数のAWSアカウントのコストがひとつの請求書に統合されることによる支払い業務の効率化
- 各AWSアカウント(ex:業務部門/IT部門、開発環境/本番環境など)の使用状況を統合的に把握可能
- 複数のAWSアカウントの使用量を統合することで、ボリュームディスカウントによるコスト削減が可能

# 3 AWS Cost and Usage Reportによる詳細レポート・分析
AWSのサービスごとのリソース使用状況とコストを1時間ごとや日時で収集し、  
CSV形式でS3へ保存、またはRedshiftに格納したり、**Amazon QuickSight**で分析・可視化したりできる。

このレポートで取得可能な情報には以下のようなものがある。
* bill/PayerAccountId: 支払いアカウントのAWSアカウントID
* product/ProductName: 利用しているAWSサービスの名前
* product/region: AWSサービスのリージョン
* LineItem/UsageAmount: 指定した期間に発生したリソース使用量

# 4 Cost Explorerによるコストの可視化と傾向分析
Cost and Usage Reportのデータをグラフィカルに可視化したり検索したりできるサービス。

## - 可視化
最大で過去12か月分のコストデータをグラフ表示できる

## - 分析
サービス、AWSアカウント、リージョン、AZ、インスタンスタイプ、タグなどの条件で  
フィルタリングして表示できる。カスタムレポートの作成も可能。

## - 予測
可視化や分析だけでなく、過去の使用量のトレンドから今後3か月間のコストを予測できる。

***
# 5 予算設定による利用超過の監視
AWSでは、Billing and Cost Management Dashboardの**Budgets**から予算を作成できる。  
予算額やリソース使用量をあらかじめ設定し、現在どのくらい消費しているかを確認したり、超過時の通知方法を設定したりできる。

## - 予算額の設定
コストやリソース使用量などを監視する対象を選び、月次や四半期などのタイミングを指定して監視する予算額や使用量を設定する。

## - 通知の設定
設定した予算額を超過しそうな場合、または超過した場合にCloudWatchアラームやSNSトピック、メールなどによる通知が可能。

***
# 6 Trusted Advisorによるコスト最適化
## - 使用率に低いEC2インスタンス
少なくとも過去14日間、常に稼働しているEC2インスタンスがあり、  
1日のCPU使用率が10%以下、かつネットワークI/Oが5MB以下である日が4日以上ある場合にアラートを出す。

仕様室が低いEC2インスタンスに対し、インスタンス数やインスタンスサイズを調整することでコスト削減が可能。

## - EC2リザーブドインスタンスの最適化
前月の1時間ごとのEC2使用量に基づいて、リザーブドインスタンスの最適数を推奨する。  
推奨されたリザーブドインスタンス数を購入することで、少なくともEC2使用料金の10%を節約可能

## - 関連付けられていないElastic IPアドレス(EIP)
稼働中のEC2インスタンスに関連付けられていない**EIP**をチェックする。  
EIPに課金が発生するため、EC2インスタンスへ割り当てられていないEIPや、割り当てていても停止中の場合には、  
使用していないEIPを解放することでコスト削減が可能。