# 1 SQSやKinesisによるバッファリング
バッファリングにより処理を非同期化することで需要と供給を管理する方法がある。

Auto Scalingでは「発生する需要(負荷)の増減に応じて柔軟にリソースを自動増減すること」が主な目的であるが、  
必ずしも同期的に処理する必要がない場合は、*バッファリングなどの仕組みにより需要(負荷)を一時的に蓄積しておき、処理する側の必要に応じた感覚で非同期的に処理を行う*という方法もある。

## - Amazon SQS
- 標準キュー  
  キューイングされたメッセージを取り出して処理を行なう際の順番が保証されない。  
  動画のエンコーディング処理など、順序性は関係なく並列で行うバッチ処理などが適している。

- FIFO(先入れ先出し)キュー  
  メッセージをキューイングした順番で処理することが保証される。  

### 1: ロングポーリング (Long Polling)
通常、SQSキューに対して受信者がメッセージ取得要求を送ると、キューが空の場合でもEmptyメッセージが返送される(**ショートポーリング**)。SQSはリクエスト単位の課金の為、この方式は非効率的である。

ロングポーリングでは、キューが空の場合にメッセージを取得できるまで待つ時間を設定することで、メッセージ取得要求の数を減らすことができる。

### 2: 可視性タイムアウト (Visibility Timeout)
ある受信者がメッセージを取得した場合に、ほかの受信者にはそのメッセージをある一定時間(デフォルト30秒間)見せないようにすることで、  
処理の重複を防ぐ、またリクエスト数を減らすことができる。

### 3: スポットインスタンスとの組み合わせ
メッセージ受信のアプリケーションにスポットインスタンスを使用することで、仮にスポットインスタンスが強制終了されたとしても、  
可視性タイムアウトを超過すると自動的にほかの受信者がメッセージを取得できるようになるため、処理の再実行が可能となる。

## - Amazon Kinesis
### Amazon Kinesis Data Streams
ストリーミングデータをほぼリアルタイムで収集することができ、収集されたデータはEMRやLambdaなどのサービス上に構築された独自アプリケーションに連携して処理することが可能。

また、流れてくる大容量のデータを効率的に処理するために、「**シャード**」という単位でデータを分割して並列処理を行える。

### Amazon Kinesis Data Firehose
独自にアプリケーションを構築することなく、ストリームデータをAmazonの各サービスに簡単に配信・保存できるサービス。

### Amazon Kinesis Data Analytics
ストリーミングデータに対してSQLクエリを実行し、リアルタイム分析を行うサービス。