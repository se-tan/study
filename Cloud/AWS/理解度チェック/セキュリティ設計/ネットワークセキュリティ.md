## セキュリティグループとネットワークACLによるアクセス制御
- ## セキュリティグループ  
  **EC2インスタンス**などに適用するファイアウォール機能。  
  - デフォルトではアウトバウンド通信は全て**許可**、インバウンドは全て**拒否**  
  - 許可するルールのみを最大60まで定義可能(ホワイトリスト形式)  
  - 複数のセキュリティグループをEC2インスタンスへ適用が可能  
  - 設定追加・変更は**即座に**反映される  
  - **ステートフル**な制御が可能(許可された通信の戻りの通信も自動的に許可)

- ## ネットワークACL  
  VPC内に構成された**サブネット**に対するファイアウォール機能。  
  - VPC内に構成したサブネットごとに1つのみネットワークACLを設定可能
  - *VPC作成時*のデフォルトネットワークACLは、全てのトラフィックを*許可*
  - *新規ネットワークACL作成時*のデフォルトネットワークACLは、全てのトラフィックを**拒否**
  - インバウンドとアウトバウンドそれぞれに対して許可または拒否を明示した通信制御
  - **ステートレス**(両方向の通信制御設定が必要)

### セキュリティグループとネットワークACLを両方とも適用している場合
**双方のルールで許可されないと拒否**となる。

***
## 踏み台サーバーによるセキュアなリモートアクセス制御
###  - 踏み台サーバーの役割
VPC内のEC2インスタンスに対し、**リモート**からセキュアにアクセスする方法の一つ。

VPC内の全てのサーバーのセキュリティグループで、SSHやRDPをインターネットから常時許可しておくのはセキュリティ上好ましくない。

そのため、メンテナンス等の作業で一時的に踏み台としてアクセス可能な踏み台サーバーを用意しておき、  
踏み台サーバーにログインした後で、各サーバーにアクセスすることでセキュリティリスクを低減する。

### - 構成のポイント
- メンテナンスなどでSSHやRDPなどのリモートアクセスが必要となる場合のみ、踏み台サーバーを起動する
- 踏み台サーバーはパブリックサブネットに設置し、パブリックIPを設定する
- 踏み台サーバーに適用するセキュリティグループには、インターネットから踏み台サーバーに対するSSHやRDPアクセスの許可ルールを設定する
- インターネットからのアクセス元IPは、不特定多数(0.0.0.0/0)ではなく、  
  メンテナンス利用するPCなどの特定のIPやサブネットを指定することで、よりセキュアなアクセス制御が可能になる。
- 踏み台サーバー経由でアクセスされるEC2インスタンスには、必要に応じて「踏み台サーバーからのSSHやRDPのみ許可」をセキュリティグループに設定しておく

***
## Webアプリケーションの保護
### - AWS Web Applpication Firewall (WAF)
**SQLインジェクション**や**クロスサイトスクリプティング**のような一般的な攻撃から保護する機能をもつ。

送信元のIPアドレスに基づくアクセス制限や、HTTPプロトコル情報に対してフィルタリングを設定し防御する。

CloudFrontやALB、API Gatewayなどにアタッチし、各サービスへのアクセスを制御できる。

### - AWS Shield
**DoS**や**DDoS**に代表される一斉攻撃に対する防御に適している。