# セキュリティ監視の関連サービス
## - AWS CloudTrail
AWSアカウントで利用されたAPIコールをログとして記録するサービス。
* AWSアカウントを取得した時点で有効化され、過去90日間のサービスに対する操作を表示する
* 取得されたログはデフォルトでS3に保存され、CloudWatch Logsへの連携も可能
* AWSの様々なサービスをサポート・連携してログ記録を行う
* 記録内容は、サービスのAPIコール元、時間、送信元IPアドレス、呼び出したAPI、対象となるリソースなど

## - VPCフローログ
VPC内のネットワークI/F間で行き来する通信の内容をキャプチャする機能。CloudWatch Logsを使用してログを保存・可視化できる。

記録されるログは、送信元IP・ポート、宛先IP・ポート、プロトコル番号などのNW通信に関する詳細な内容など。

## - Amazon GuardDuty
AWS内の各種ログを監視し、悪意ある第三者による攻撃や不正操作などのセキュリティ脅威を検知するサービス。

たとえば、マルウェアによって動作が不審なEC2インスタンスの検出や、あまり利用されていないリージョンでのEC2インスタンス起動など、驚異の可能性のある動作を検知する。  
これらの脅威を継続的に検知するために、機械学習による不正な動作の学習や異常検知の仕組みが利用されている。

## - CloudWatch Logs
CloudTrailやVPCフローログなど、AWSの様々なログを統合的に収集するサービス。  
AWSのログだけでなく、LinuxなどのサーバーOSにログを収集・通知するエージェントをインストールすることで、様々なログをCloudWatch Logsに送信することも可能。

## - AWS Config
AWSのサービスで管理されているリソースの構成変更を追跡するサービス。

たとえば、EC2インスタンスの作成や削除などの構成変更の履歴を取得できる。  
変更をメール通知することで、意図しないリソース変更の監視・追跡が可能。

## - AWS Trusted Advisor
AWSのベストプラクティスに基づいて、コスト最適化、セキュリティ、耐障害性、パフォーマンス、サービスの制限の5項目で  
ユーザーのAWS利用状況をチェックし、改善すべき事項を推奨するサービス。

以下の観点でのセキュリティ診断が行える。
* セキュリティグループ―開かれたポート  
  特定のポートに対して無制限アクセス(0.0.0.0/0)を許可しているグループのルールをチェックする

* ルートアカウントの多要素認証  
  AWSアカウントのルートユーザーで多要素認証(MFA)が有効にされていない場合にアラートを表示する

## - Amazon Inspector
EC2インスタンスのセキュリティを高めるサービス。EC2インスタンスにInspectorのエージェントをインストールすることで、EC2インスタンス上のアプリケーションの脆弱性などを診断可能。

***
# AWS上でのセキュリティ侵入テスト
継続的なセキュリティ監視の手段として、AWSを利用するユーザー側で定期的に脆弱性のスキャンやペネトレーションテストなどのセキュリティ診断を行うことも重要。

AWSでは、「AWS脆弱性/侵入テストリクエストフォーム」から申請し許可を得ることで、ユーザー側でこれらのテストを実施することが可能。