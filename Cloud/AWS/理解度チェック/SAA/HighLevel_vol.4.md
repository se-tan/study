# 不正解 / 疑問

## 問. 「顧客からのデータベースへのデータ登録」をトリガーにメッセージを通知し、複数の EC2 インスタンスを利用した処理サーバーによる並列処理を実施。顧客からのデータ登録リクエストは多数発生する可能性があるが、いづれか 1 つのサーバーにより処理が完了させることが要件

### **解. SNS + SQS**

実装として「顧客からのデータベースへのデータ登録」をトリガーとして SNS をプッシュ通知し、SQS にメッセージを送信。

次に SQS がそのメッセージにある処理要求をキューに格納してデータ処理リクエストを EC2 サーバーに送信。

SQS はいずれかのサーバーで 1 回は絶対に処理がされるようにポーリング処理することができ、サーバーによる並列処理を開始することが可能。

以下はその他疎結合アーキテクチャ

| Service                   | Description                                |
| :------------------------ | :----------------------------------------- |
| Amazon CloudWatch         | Billing Alert の通知                       |
| Amazon SES                | Bounce/Complaint のフィードバック通知      |
| Amazon SQS                | SNS 通知によりキューを配信して、処理を実行 |
| Amazon S3                 | ファイルがアップロードされた時の通知       |
| Amazon Elastic Transcoder | 動画変換処理完了/失敗時の通知              |
| AWS Lambda                | SNS をトリガーとして処理を起動する。       |

---

##
