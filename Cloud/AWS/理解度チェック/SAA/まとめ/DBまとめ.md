# データベースいろいろ

| Category    | Feature                                                            | Use Case                                                                   |
| ----------- | ------------------------------------------------------------------ | -------------------------------------------------------------------------- |
| Relational  | 参照整合性、ACIDトラン、Schema-On-Write                            | リフト&シフト、ERP、CRM、金融                                              |
| Key-value   | 高スループット、低レイテンシーのI/O、無限のスケール                | リアルタイム入札、ショッピングカート、ソーシャル、製品カタログ、顧客の好み |
| Document    | ドキュメントを保存し、任意の属性にクエリで素早くアクセス           | コンテンツ管理、パーソナライゼーション、モバイル                           |
| In-memory   | マイクロ秒のレイテンシーでキーによるクエリ                         | リーダーボード、リアルタイム分析、キャッシング                             |
| Graph       | 素早く簡単にデータ間の関係を作成しナビゲート                       | 不正検出、ソーシャルネットワーッキング、レコメンドエンジン                 |
| Time-series | データを時間順に収集、格納、処理                                   | IoTアプリケーション、イベントトラッキング                                  |
| Ledger      | 完全で不変で検証可能なアプリケーションデータに対する全ての変更履歴 | SoR、サプライチェーン、ヘルスケア、届出、財務                              |

<br>

| Category    | AWS Resource      |
| ----------- | ----------------- |
| Relational  | Amazon RDS        |
| Key-value   | DynamoDB          |
| Document    | DocumentDB        |
| In-memory   | ElastiCache       |
| Graph       | Amazon Neptune    |
| Time-series | Amazon Timestream |
| Ledger      | Amazon QLDB       |

<br>

***

## ■ RDS vs NoSQL

| RDS                    | NoSql                        |
| ---------------------- | ---------------------------- |
| ストレージに最適化     | 計算リソースに最適化         |
| 正規化/リレーショナル  | 非正規化/階層構造            |
| SQLを使用可能          | 各DBで異なるクエリ方法       |
| トランザクション処理   | トランザクション処理は限定的 |
| データの堅牢性/一貫性  | 左記特性はDBによる           |
| スケールアウトの煩雑さ | 高いスケーラビリティ         |

<br>

***

## ■ Key-value Store

キーバリューストア(KVS)とは、文字通りキーに紐づくバリューが格納されてたDB。

KVSは1対1の関係でとてもシンプルな構成のため、超高速なパフォーマンスを発揮する為、低レイテンシーかつ高スループットのデータアクセスに利用される。

具体的には、オンラインゲームデータやEコマースのショッピングカートなど。

### - **Amazon DynamoDB**

**どんな規模にも対応する高速で柔軟なキーバリューストア型のマネージドDB**で、データをキーとバリューという1対1の構造で保持する。**RDBより高速に読み書きが可能**。

- 管理不要で信頼性が高い
- プロビジョンドスループットのため、テーブルごとにReadとWriteそれぞれに対し、必 要な分だけのスループットキャパシティを割り当てる
- ストレージの容量制限がない

***

## ■ Document Database

jsonやxmlなど事前にスキーマを決める必要がなく、不定形なデータに対応したDB。

よって、情報の変化があるニュース記事だったり、カタログなどによく利用される。

### - **Amazon DocumentDB**

**MongoDB互換の高速でスケーラブルかつ高可用性のフルマネージドドキュメント指向DBで、JSONやXMLなど不定形なデータ構造に対応し複雑なデータモデリングを容易に実装可能**。

頻繁に変更される属性情報(例：Amazon.comの商品属性情報)など、RDBではスキーマ設計が必須で属性を定義しないとINSERTができない。かといって全ての属性情報を定義するのは難しい。そういった場合に役立つ。

***

## ■ In-memory Database

データをディスクや SSD に保存するDBではなく、データストレージ用のメモリを利用するKVS型のDB。

**インメモリDBは、ディスクにアクセスする必要性を除くことによって、最小限の応答時間を達成するよう設計**されている。

ゲームリーダーボード、セッションストア、リアルタイム分析などの、**マイクロ秒の応答時間**が必要でいつでもトラフィックが急増する可能性がある場合かつ、障害時のデータ損失リスクが許容できるまたはその他のデータストアを持ちデータの永続化ができるような時に利用する。

### - **Amazon ElastiCache**

Redis、Memcached互換の**インメモリデータストア、キャッシュサービス**。**RDBでは難しいマイクロ秒単位の応答時間**が求められるレイテンシクリティカルな処理(ゲーム、Webサイト)などに利用される。

***

## ■ 列指向データベース

RDBがデータ行の保存向けに最適化され、通常はトランザクション型アプリケーション用であるのに対し、  
データ列の高速な取得向けに最適化されたデータベースが列指向データベース。

### - **Amazon Redshift**

高速、スケーラブルで費用対効果の高いデータウェアハウス(DWH)およびデータレイク分析マネージドサービス。

DWHとは、一般に**時系列に整理された大量の統合業務データ、もしくはその管理システム**で、複数の基幹系システム（製造管理システム、販売管理システム、会計システムなど)から、トランザクション(取引)を抽出して、再構成・再蓄積したシステムを指す。

これらの蓄積したデータを分析することで、企業の意思決定に利用する。

**データレイクとは、規模にかかわらず、すべての構造化データと非構造化データを保存できる一元化されたリポジトリ**。

データをそのままの形で保存できるため、データを構造化しておく必要がない。  
また、ダッシュボードや可視化、ビッグデータ処理、リアルタイム分析、機械学習など、さまざまなタイプの分析を実行し、的確な意思決定に役立てることができる。