# 監視とレポート

## ■ Azure Service Health

Azure自体が正常に動作しているかを監視するツール。Azure上のサービス正常性を追跡し、ダッシュボードで状態を確認できる。

| Item                     | Description                                             |
| ------------------------ | ------------------------------------------------------- |
| サービスに関する問題     | Azureサービスに影響のある問題                           |
| 計画メンテナンス         | Azureサービスの可用性に影響のある今後のメンテナンス情報 |
| 正常性の勧告             | Azureの機能の変更点                                     |
| セキュリティアドバイザリ | Aセキュリティ関連の通知や違反に関する情報               |

<br>

***

## ■ Azure Advisor

以下5つのカテゴリに関する推奨事項を提供するサービス。

| Item                         | Description                                |
| ---------------------------- | ------------------------------------------ |
| コスト                       | 過剰リソースがあるか確認しあれば削除を提案 |
| セキュリティ                 | 適切なセキュリティ設定がされているかを確認 |
| 信頼性(可用性)               | 適切な可用性が確保されているか確認         |
| オペレーショナルエクセレンス | 操作性の改善が必要か確認                   |
| パフォーマンス               | 性能上の問題が無いか確認                   |

<br>

***

## ■ Azure Monitor

Azure環境で利用中のサービスやリソースに加え、オンプレミスやほかのクラウド上のリソースを監視する機能を提供する。

- アプリケーション監視データ
- ゲストOS監視データ
- Azureリソース監視データ
- Azureサブスクリプション監視データ
- Azureテナント監視データ

Azure環境にVMやWebアプリなどのリソースを展開すると、以降のデータ収集も可能。

### - **アクティビティログ**

管理者によるAzureリソースの作成や変更に関する処理が記録される。保存期間は90日間。

<br>

### - **メトリック**

リソースのパフォーマンスデータを収集しグラフで表示できる。  
VMや、VM Scale Setなどのコンピューティングリソースの診断を有効にすることでエージェント(監視機能)が追加される(以下の表)。

| Item                   | Description                                     |
| ---------------------- | ----------------------------------------------- |
| パフォーマンスカウンタ | CPU使用率など監視したいパフォーマンス情報を指定 |
| イベントログ           | システムやセキュリティなど監視したいログを指定  |
| クラッシュダンプ       | 特定のプロセスが異常終了した場合のメモリ情報    |
| シンク                 | さらに詳細な診断情報を送信                      |
| エージェント           | 診断情報を送信しているエージェントの動作を変更  |

<br>

***

## ■ Azure Alert

監視対象のサービスやリソースがあらかじめ設定した閾値を超えた場合に、指定したアクションを実行する機能。

以下4つの内容を指定して警告を発生させるルールを作成する。

| Item               | Description                                          |
| ------------------ | ---------------------------------------------------- |
| スコープ           | 監視対象(仮想マシンなど)                             |
| 条件               | 監視条件(メトリックまたはアクティビティログとその値) |
| アクショングループ | 条件を満たした時の通知と動作                         |
| 詳細               | ルール名や保存先のリソースグループなど               |

アクショングループには、通知機能として電子メール、SMS
SMS,音声電話を指定可能なほか、以下アクションを同時に複数登録できる。

| Action             | Description                                          |
| ------------------ | ---------------------------------------------------- |
| Functions          | 関数アプリとして登録済みプログラムを起動             |
| Logic App          | アプリケーションと連携する機能を起動                 |
| Webhook            | 指定したURLにHTTPリクエストを送り外部Webアプリを起動 |
| IT Service Manager | システム管理ツールと連携                             |
| Automation Runbook | システム管理スクリプト実行機能を起動                 |

<br>

***

## ■ Azure Log Analytics

サービスやリソースのログを収集し、分析するためのサービス。  
オンプレミスのITサービス皇后監視ソリューションSCOMと統合することも可能。