# ネットワークサービス

## ■ Azure Virtual Network(VNET)

仮想マシンやその他のAzureリソースを接続するNW。  
Azureに作成された仮想NWには1つ以上のサブネットを作成し、VMマシンを配置する。

***既定ではサブネット間の通信は制限されない***ため、同じ仮想NWに参加しているVMマシン間は異なるサブネットでも通信可能。

これは、仮想NWには**システムルート**と呼ばれる自動で構成されるルーティング環境があるため。

仮想NW同士を**ピアリング**や**VNET間接続(仮想ネットワークゲートウェイ)**によって接続し、相互通信環境を確立する必要がある。

- ネットワーク仮想アプライアンス(NVA)  
  複数のネットワークカードを持った仮想マシンを作成し、サブネット間のルーティング機能とセキュリティフィルター機能を構成する。

- ユーザ定義ルート(UDR)  
  NVAのルーティング機能を使うため、システムルートよりも優先度の高いルートを定義する。

***

### - **VPNゲートウェイ**

VNETとオンプレミスNWをインターネット経由で接続するサービス。通信は暗号化される。

仮想NWとオンプレミスNWを接続する場合は、仮想NWに**ゲートウェイサブネット**を作成し、VPNゲートウェイを追加する。

***

### - **ExpressRoute**

特定の通信回線業者の閉域NWを使用して、オンプレミスNWとマイクロソフトクラウドを接続するためのサービス。

AzureDCだけでなく、Microsoft 365やDynamicsCRMなどMicrosoftクラウドサービスとの接続も可能であり、  
インターネット経由しないため、低レイテンシーでセキュアな通信を実現可能(最大100Gbps)。

- データ無制限モデル：月額固定料金
- データ従量課金モデル：月額料金 + 1GB毎のデータ転送料金

***

### - **VNETピアリング**

2つのVNETを、VPNGWを使わずに直接接続する方法。同一リージョンでも異なるリージョンでも可能。  
異なるリージョン間接続の場合は、**グローバルピアリング**という。

<br>

【VNET間接続とピアリングの違い】
| 項目           | VNET間接続                                      | ピアリング     |
| -------------- | ----------------------------------------------- | -------------- |
| VPN GW         | 必要                                            | 不要           |
| 通信データ課金 | リージョン内は不要/リージョン間は送信側のみ課金 | 送受信で課金   |
| 速度制限       | VPN GWのSKUで制限                               | なし           |
| ルーティング   | 可能                                            | 考慮していない |

***

### - **Azure Load Balancer**

HTTP/Sプロトコル(TCP/UDP)アプリケーションへの高可用性および負荷分散を実現する**レイヤ4負荷分散装置**。